# Миркосервисное чат-приложение

### Стек: FastAPI + Aiogram + PyMongo + Redis + Nginx + CertBot + Docker

### Установка: 
Для начала необходимо установить docker. Гугл в помощь.\
Далее:
```
git clone [этот репозиторий]
cd [этот репозиторий]
```
Далее необходимо отредактировать .env-template файл и переименовать его в .env\
Сделать это можно любым удобным способом, например 
```commandline
sudo nano .env-template
```
Переменные файла:\
```
BOT_TOKEN - сюда нужно вставить ваш токен бота от t.me/botfather

PAGE_SIZE=20 - максимальное количество сообщений на странице. не должно быть меньше 1

MESSAGE_LENGTH=300 - максимальная длина сообщения. не должно быть меньше 1

DOCKER_ENV=1 - сообщает боту и приложению, что они в докере. лучше оставить 1

DEBUG=1 - более подробные логи. если устраивает как работает приложение - ставьте 0

REDIS_HOST=redis - имя хоста Redis. лучше оставить как есть

REDIS_PORT=6379 - имя порта Redis. лучше оставить как есть

MONGO_USER=root - имя пользователя mongoDB. лучше оставить как есть

MONGO_PASSWORD - пароль для пользователя MONGO_USER от mongoDB

BASE_DOMAIN - имя вашего домена. НЕТ ДОМЕНА - ПРИЛОЖЕНИЕ НЕ ЗАПУСТИТСЯ (я работаю над режимом без домена, но пока лень это дописывать)

WEBHOOK_BOT=1 - при 0 бот будет делать polling, при 1 - будет на веб хуке.

WEBHOOK_PATH=webhook - имя пути вебхука для телеграма. будет иметь вид BASE_DOMAIN+WEBHOOK
```
Если .env файл на месте:
```commandline
docker compose up --build -d
```
Поздарвляю, приложение запущено.\
По адресу BASE_DOMAIN/docs можно посмотреть как работает api\
У бота можно запросить команду /start